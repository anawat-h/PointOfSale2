import{M as $}from"./Modal.402bdf30.js";import{D as N,I as T}from"./ItemDetail.066c6354.js";import{d as j,r,c as m,i as F,_ as H,a as p,b as t,F as O,e as z,n as D,g as b,w as L,h,o as c,t as I,j as _,v as w,p as q,k as G}from"./index.76ef20d6.js";const J=j({components:{Modal:$,Dropdown:N,ItemDetail:T},setup(){const e=F("datastore"),u=r([]);e.unit.getAllUnits().then(l=>{u.value=l});const s=r([]);e.item.getAllItems().then(l=>{s.value=l});const A=m(()=>u.value.map(l=>({value:l.id,text:l.name}))),y=m(()=>s.value.map(l=>{var v;return{code:l.code,name:l.name,unitName:(v=u.value.find(M=>M.id===l.unitID))==null?void 0:v.name,price:l.price}})),n=r(),f=m(()=>n.value||n.value===0?s.value[n.value]:{code:"-",name:"-",price:0}),d=r({code:"",name:"",unitID:void 0,price:0}),i=r(!1),o=r("");function E(){d.value={code:"",name:"",unitID:void 0,price:0},o.value="\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",i.value=!0}function g(){d.value={...s.value[n.value]},o.value="\u0E41\u0E01\u0E49\u0E44\u0E02\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",i.value=!0}function S(){const l=d.value;if(l.id&&(!l.code||l.code.length===0)){alert("code is empty");return}if(!l.name||l.name.length===0){alert("name is empty");return}if(l.price===void 0||l.price===null){alert("price is empty");return}if(!l.unitID){alert("unitID is empty");return}e==null||e.item.editItem(d.value).then(async()=>{s.value=await e.item.getAllItems(),i.value=!1}).catch(v=>alert(v))}function V(){e==null||e.item.deleteItem(s.value[n.value].id).then(async()=>{const l=await e.item.getAllItems();n.value=void 0,s.value=l}).catch(l=>alert(l))}const k=m(()=>!n.value&&n.value!==0||n.value===0);function B(){k.value||n.value--}const C=m(()=>!n.value&&n.value!==0||n.value===s.value.length-1);function U(){C.value||n.value++}return{unitOptions:A,itemTableData:y,selectedIndex:n,selectedItem:f,formData:d,modalState:i,modalHeading:o,openAdd:E,openEdit:g,onSubmit:S,onDelete:V,prevDisabled:k,prev:B,nextDisabled:C,next:U}}});const a=e=>(q("data-v-47b9a612"),e=e(),G(),e),K=a(()=>t("h2",null,"\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",-1)),P={class:"row"},Q={class:"col"},R=a(()=>t("thead",null,[t("tr",null,[t("th",{width:"5%"},"No."),t("th",{width:"15%"},"\u0E23\u0E2B\u0E31\u0E2A\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32"),t("th",null,"\u0E0A\u0E37\u0E48\u0E2D\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32")])],-1)),W=["onClick"],X={class:"col"},Y={class:"row"},Z={class:"card col-10"},x={class:"d-flex"},ee=["disabled"],te=["disabled"],oe={class:"row"},ue={class:"col-md-6"},le=a(()=>t("label",null,"\u0E23\u0E2B\u0E31\u0E2A\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",-1)),ne=a(()=>t("br",null,null,-1)),ae=["value"],se={class:"col-md-6"},de=a(()=>t("label",null,"\u0E0A\u0E37\u0E48\u0E2D\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",-1)),ie=a(()=>t("br",null,null,-1)),Ee={class:"row"},re={class:"col-md-6"},me=a(()=>t("label",null,"\u0E23\u0E32\u0E04\u0E32",-1)),pe=a(()=>t("br",null,null,-1)),ce={class:"col-md-6"},ve=a(()=>t("label",null,"\u0E2B\u0E19\u0E48\u0E27\u0E22",-1)),fe=a(()=>t("br",null,null,-1));function De(e,u,s,A,y,n){const f=h("ItemDetail"),d=h("Dropdown"),i=h("Modal");return c(),p("div",null,[K,t("div",P,[t("div",Q,[t("button",{type:"button",class:"add-button",onClick:u[0]||(u[0]=(...o)=>e.openAdd&&e.openAdd(...o))},"\u0E40\u0E1E\u0E34\u0E48\u0E21"),t("table",null,[R,t("tbody",null,[(c(!0),p(O,null,z(e.itemTableData,(o,E)=>(c(),p("tr",{key:E,class:D({"text-primary":e.selectedIndex===E}),onClick:g=>e.selectedIndex=E},[t("td",null,I(E+1),1),t("td",null,I(o.code),1),t("td",null,I(o.name),1)],10,W))),128))])])]),t("div",X,[t("div",Y,[t("h1",{class:D(["col-1 arrow",{disabled:e.prevDisabled}]),onClick:u[1]||(u[1]=(...o)=>e.prev&&e.prev(...o))},"<",2),t("div",Z,[b(f,{item:e.selectedItem},null,8,["item"]),t("div",x,[t("button",{disabled:!e.selectedIndex&&e.selectedIndex!==0,onClick:u[2]||(u[2]=(...o)=>e.openEdit&&e.openEdit(...o))},"\u0E41\u0E01\u0E49\u0E44\u0E02",8,ee),t("button",{disabled:!e.selectedIndex&&e.selectedIndex!==0,onClick:u[3]||(u[3]=(...o)=>e.onDelete&&e.onDelete(...o))},"\u0E25\u0E1A",8,te)])]),t("h1",{class:D(["col-1 arrow",{disabled:e.nextDisabled}]),onClick:u[4]||(u[4]=(...o)=>e.next&&e.next(...o))},">",2)])])]),b(i,{shown:e.modalState,"onUpdate:shown":u[9]||(u[9]=o=>e.modalState=o),heading:e.modalHeading,onSave:e.onSubmit},{body:L(()=>[t("div",oe,[t("div",ue,[le,ne,e.formData.id?(c(),p("input",{key:0,disabled:"",value:e.formData.code},null,8,ae)):_((c(),p("input",{key:1,"onUpdate:modelValue":u[5]||(u[5]=o=>e.formData.code=o)},null,512)),[[w,e.formData.code]])]),t("div",se,[de,ie,_(t("input",{"onUpdate:modelValue":u[6]||(u[6]=o=>e.formData.name=o),autocomplete:"off"},null,512),[[w,e.formData.name]])])]),t("div",Ee,[t("div",re,[me,pe,_(t("input",{type:"number","onUpdate:modelValue":u[7]||(u[7]=o=>e.formData.price=o)},null,512),[[w,e.formData.price]])]),t("div",ce,[ve,fe,b(d,{modelValue:e.formData.unitID,"onUpdate:modelValue":u[8]||(u[8]=o=>e.formData.unitID=o),options:e.unitOptions},null,8,["modelValue","options"])])])]),_:1},8,["shown","heading","onSave"])])}const _e=H(J,[["render",De],["__scopeId","data-v-47b9a612"]]);export{_e as default};
